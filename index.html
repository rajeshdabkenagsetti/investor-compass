<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Compass | Multi-Asset Comparison Framework</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary-color: #1a365d;
            --secondary-color: #2d74da;
            --accent-1: #00b894;
            --accent-2: #fd79a8;
            --warning-color: #e17055;
            --light-bg: #f8fafc;
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 12px;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        /* Transparency Banner - MUST SEE FIRST */
        .transparency-banner {
            background: linear-gradient(135deg, #fff8e1, #fff3cd);
            border-left: 6px solid var(--warning-color);
            padding: 25px 30px;
            margin-bottom: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            animation: pulse-border 3s infinite;
        }

        @keyframes pulse-border {
            0%, 100% { border-left-color: var(--warning-color); }
            50% { border-left-color: #f39c12; }
        }

        .transparency-banner h3 {
            color: var(--warning-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
        }

        .transparency-banner .warning-icon {
            background: var(--warning-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .transparency-banner ul {
            margin: 15px 0 0 25px;
        }

        .transparency-banner li {
            margin-bottom: 8px;
            color: #5d4037;
            line-height: 1.5;
        }

        .disclosure-checkbox {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid var(--border-color);
        }

        .disclosure-checkbox label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-color);
        }

        .disclosure-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--secondary-color);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border-top: 4px solid var(--secondary-color);
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto 15px;
        }

        .purpose-statement {
            background: var(--light-bg);
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            max-width: 800px;
            margin: 0 auto;
            border-left: 4px solid var(--accent-1);
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .purpose-statement i {
            color: var(--accent-1);
            margin-top: 2px;
        }

        .controls {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 30px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            background: linear-gradient(135deg, #ffffff 0%, #fcfdff 100%);
        }

        .asset-selector {
            flex: 1;
            min-width: 300px;
        }

        .selector-group {
            margin-bottom: 15px;
        }

        .selector-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .selector-group label i {
            color: var(--secondary-color);
        }

        .styled-select {
            width: 100%;
            padding: 14px 45px 14px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%232d74da' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E") no-repeat right 15px center;
            background-size: 20px;
            color: var(--text-primary);
            transition: all 0.3s;
            height: 50px;
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .styled-select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(45, 116, 218, 0.2);
        }

        .asset-search {
            margin-top: 10px;
            padding: 10px;
            width: 100%;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            min-height: 50px;
            white-space: nowrap;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary-color), #1a5dc2);
            color: white;
            box-shadow: 0 4px 12px rgba(45, 116, 218, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #1a5dc2, #1547a1);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(45, 116, 218, 0.4);
        }

        .btn-secondary {
            background: var(--light-bg);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
            transform: translateY(-2px);
        }

        .btn-swap {
            background: linear-gradient(135deg, var(--accent-2), #e84393);
            color: white;
            box-shadow: 0 4px 12px rgba(253, 121, 168, 0.3);
        }

        .btn-swap:hover {
            background: linear-gradient(135deg, #e84393, #d63073);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(253, 121, 168, 0.4);
        }

        .priority-selector {
            background: var(--card-bg);
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border-top: 4px solid var(--accent-1);
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        .priority-selector h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .priority-selector h3 i {
            color: var(--accent-1);
        }

        .priority-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .priority-chip {
            padding: 12px 24px;
            background: var(--light-bg);
            border: 2px solid var(--border-color);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .priority-chip:hover {
            transform: translateY(-2px);
            border-color: var(--secondary-color);
        }

        .priority-chip.selected {
            background: linear-gradient(135deg, var(--accent-1), #00a085);
            color: white;
            border-color: var(--accent-1);
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
        }

        .comparison-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 1200px) {
            .comparison-area {
                grid-template-columns: 1fr;
            }
        }

        .asset-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform 0.3s;
            border-top: 4px solid var(--secondary-color);
            background: linear-gradient(135deg, #ffffff 0%, #fcfdff 100%);
        }

        .asset-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .asset-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .asset-header h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .asset-subtitle {
            opacity: 0.9;
            font-size: 1rem;
            margin-bottom: 8px;
            font-weight: 400;
        }

        .asset-methodology-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .radar-container {
            padding: 25px;
            height: 400px;
            position: relative;
        }

        .scores-panel {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 25px;
            background: var(--light-bg);
            border-top: 1px solid var(--border-color);
        }

        .score-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: relative;
            border: 1px solid var(--border-color);
            transition: transform 0.3s;
        }

        .score-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .score-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .score-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .score-aqi {
            grid-column: span 2;
            background: linear-gradient(135deg, var(--accent-1), #00a085);
            color: white;
            border: none;
        }

        .score-aqi .score-value {
            color: white;
        }

        .score-aqi .score-label {
            color: rgba(255, 255, 255, 0.9);
        }

        .score-confidence {
            position: absolute;
            bottom: 8px;
            right: 8px;
            font-size: 0.7rem;
            opacity: 0.7;
            color: var(--text-secondary);
        }

        .score-aqi .score-confidence {
            color: rgba(255, 255, 255, 0.8);
        }

        .dimensions-panel {
            padding: 25px;
        }

        .dimensions-panel h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
        }

        .toggle-details {
            background: var(--light-bg);
            border: 2px solid var(--border-color);
            color: var(--secondary-color);
            cursor: pointer;
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .toggle-details:hover {
            background: var(--border-color);
            transform: translateY(-1px);
        }

        .dimension-sliders {
            display: grid;
            gap: 15px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
            -webkit-overflow-scrolling: touch;
        }

        .dimension-sliders::-webkit-scrollbar {
            width: 8px;
        }

        .dimension-sliders::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .dimension-sliders::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        .dimension-item {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--border-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .dimension-item:hover {
            border-left-color: var(--secondary-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .dimension-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            align-items: center;
        }

        .dimension-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .dimension-score {
            font-weight: 700;
            color: var(--secondary-color);
            background: rgba(45, 116, 218, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .dimension-annotation {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 5px;
            font-style: italic;
            line-height: 1.4;
        }

        .dimension-rating {
            margin-top: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            padding: 10px 12px;
            background: rgba(255,255,255,0.9);
            border-radius: 6px;
            border-left: 4px solid var(--accent-1);
        }

        .research-basis {
            margin-top: 10px;
            font-size: 0.85rem;
            padding: 12px;
            background: rgba(0, 184, 148, 0.1);
            border-radius: 8px;
            border-left: 3px solid var(--accent-1);
            line-height: 1.5;
        }

        .research-basis strong {
            color: var(--primary-color);
        }

        .rater-name {
            font-weight: 600;
            color: var(--primary-color);
        }

        .slider-container {
            margin-top: 15px;
        }

        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #ff6b6b, #ffd166, #06d6a0);
            border-radius: 4px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: var(--shadow);
            transition: all 0.2s;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        .decision-panel {
            background: var(--card-bg);
            padding: 40px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 40px;
            border-left: 6px solid var(--accent-1);
            position: relative;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        .decision-panel:before {
            content: "EDUCATIONAL FRAMEWORK";
            position: absolute;
            top: -12px;
            left: 20px;
            background: linear-gradient(135deg, var(--accent-1), #00a085);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
        }

        .decision-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .winner-badge {
            background: linear-gradient(135deg, var(--accent-1), #00a085);
            color: white;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 184, 148, 0.3);
            white-space: nowrap;
        }

        .decision-title {
            font-size: 1.8rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .decision-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .analysis-box {
            padding: 25px;
            border-radius: 10px;
            background: var(--light-bg);
            border-top: 4px solid var(--border-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .analysis-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .analysis-box h4 {
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        .analysis-box h4 i {
            color: var(--secondary-color);
        }

        .analysis-box ul {
            list-style-type: none;
        }

        .analysis-box li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            align-items: flex-start;
            gap: 10px;
            line-height: 1.5;
        }

        .analysis-box li:before {
            content: "•";
            color: var(--accent-1);
            font-size: 1.5rem;
            line-height: 1;
            margin-top: -2px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--light-bg);
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .asset-category {
            color: rgba(255, 255, 255, 0.85);
            font-style: italic;
            font-size: 0.9rem;
            margin-top: 5px;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
            backdrop-filter: blur(10px);
        }

        .category-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .category-btn {
            padding: 10px 20px;
            background: var(--light-bg);
            border: 2px solid var(--border-color);
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 500;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            border-color: var(--secondary-color);
        }

        .category-btn.active {
            background: linear-gradient(135deg, var(--secondary-color), #1a5dc2);
            color: white;
            border-color: var(--secondary-color);
            box-shadow: 0 4px 12px rgba(45, 116, 218, 0.3);
        }

        .research-reference {
            background: var(--light-bg);
            padding: 30px;
            border-radius: var(--radius);
            margin: 40px 0;
            border-left: 4px solid var(--secondary-color);
            background: linear-gradient(135deg, #ffffff 0%, #fcfdff 100%);
        }

        .research-reference h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .research-reference h3 i {
            color: var(--secondary-color);
        }

        .research-reference ul {
            columns: 2;
            column-gap: 40px;
        }

        .research-reference li {
            margin-bottom: 10px;
            padding-left: 10px;
            break-inside: avoid;
            line-height: 1.5;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
            background: var(--card-bg);
            border-radius: var(--radius);
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        .disclaimer {
            max-width: 1000px;
            margin: 20px auto;
            padding: 25px;
            background: linear-gradient(135deg, #fff8e1, #fff3cd);
            border-radius: 10px;
            font-size: 0.85rem;
            line-height: 1.6;
            border-left: 4px solid var(--warning-color);
        }

        .disclaimer strong {
            color: var(--warning-color);
        }

        .methodology-panel {
            background: var(--card-bg);
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 40px;
            border-top: 4px solid var(--secondary-color);
            background: linear-gradient(135deg, #ffffff 0%, #fcfdff 100%);
        }

        .methodology-panel h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .methodology-panel h3 i {
            color: var(--secondary-color);
        }

        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .methodology-item {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .methodology-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .methodology-item h4 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Confidence indicators */
        .confidence-indicator {
            display: inline-block;
            margin-left: 10px;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .high-confidence {
            background: rgba(0, 184, 148, 0.2);
            color: #006b53;
            border: 1px solid rgba(0, 184, 148, 0.3);
        }

        .medium-confidence {
            background: rgba(255, 193, 7, 0.2);
            color: #856404;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .low-confidence {
            background: rgba(220, 53, 69, 0.2);
            color: #721c24;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .asset-selector {
                min-width: 100%;
            }
            
            .button-group {
                width: 100%;
                justify-content: stretch;
            }
            
            .button-group .btn {
                flex: 1;
                justify-content: center;
            }
            
            .scores-panel {
                grid-template-columns: 1fr;
            }
            
            .score-aqi {
                grid-column: 1;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .research-reference ul {
                columns: 1;
            }
            
            .decision-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .winner-badge {
                align-self: flex-start;
            }
            
            .decision-analysis {
                grid-template-columns: 1fr;
            }
            
            .legend {
                gap: 15px;
            }
            
            .asset-methodology-tag {
                position: relative;
                top: auto;
                right: auto;
                display: inline-block;
                margin-top: 10px;
            }
        }

        /* Loading overlay */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading.active {
            display: flex;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid var(--border-color);
            border-top-color: var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Mobile category filter */
        .mobile-category-filter {
            display: none;
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        @media (max-width: 768px) {
            .mobile-category-filter {
                display: block;
            }
        }

        .mobile-category-filter label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* iOS specific fixes */
        select.styled-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%232d74da' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            padding-right: 50px;
        }

        /* Touch improvements */
        .btn, .priority-chip, .category-btn, .toggle-details {
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
        }

        /* Better focus states for accessibility */
        .btn:focus, .priority-chip:focus, .toggle-details:focus {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p style="color: var(--text-secondary);">Loading Investment Framework...</p>
    </div>

    <div class="container">
        <!-- TRANSPARENCY BANNER - FIRST THING USERS SEE -->
        <div class="transparency-banner">
            <h3>
                <span class="warning-icon">!</span>
                Important: Understanding This Tool
            </h3>
            <p><strong>This is an educational framework, not actual expert ratings.</strong></p>
            
            <ul>
                <li><strong>These scores are our synthesis</strong> based on general industry research and publicly available data</li>
                <li><strong>No financial firm has rated these specific assets</strong> on a 1-10 scale - these are illustrative estimates</li>
                <li><strong>Confidence levels indicate</strong> how much published research exists for each dimension</li>
                <li><strong>Always consult primary sources</strong> and professional advisors before making investment decisions</li>
            </ul>
            
            <div class="disclosure-checkbox">
                <label>
                    <input type="checkbox" id="disclosureAck">
                    I understand this tool provides educational estimates, not actual expert ratings
                </label>
            </div>
        </div>

        <header>
            <h1><i class="fas fa-compass"></i> Investment Comparison Framework</h1>
            <p class="subtitle">Compare 50+ asset classes across 15 critical dimensions using a transparent educational model</p>
            <div class="purpose-statement">
                <i class="fas fa-graduation-cap"></i> 
                <div>
                    <strong>Educational Purpose:</strong> This tool helps understand investment trade-offs. Scores are our team's 
                    estimates based on public research, not actual ratings from financial institutions.
                </div>
            </div>
        </header>

        <!-- METHODOLOGY EXPLANATION -->
        <div class="methodology-panel">
            <h3><i class="fas fa-calculator"></i> How Scores Are Calculated</h3>
            <div class="methodology-grid">
                <div class="methodology-item">
                    <h4>Area Score (60%)</h4>
                    <p>Sum of all dimension scores, normalized to 0-10 scale. Represents overall strength across all factors.</p>
                </div>
                <div class="methodology-item">
                    <h4>Balance Score (20%)</h4>
                    <p>Measures consistency across dimensions. Higher scores mean more balanced profile with fewer weak spots.</p>
                </div>
                <div class="methodology-item">
                    <h4>Priority Score (20%)</h4>
                    <p>Average of your selected priority dimensions. Personalizes the assessment to your specific goals.</p>
                </div>
                <div class="methodology-item">
                    <h4>Confidence Levels</h4>
                    <p><span class="confidence-indicator high-confidence">High</span> = Well-researched<br>
                       <span class="confidence-indicator medium-confidence">Medium</span> = Limited data<br>
                       <span class="confidence-indicator low-confidence">Low</span> = Estimated</p>
                </div>
            </div>
        </div>

        <!-- Mobile Category Filter -->
        <div class="mobile-category-filter">
            <label for="mobileCategoryFilter"><i class="fas fa-filter"></i> Filter Assets by Category:</label>
            <select id="mobileCategoryFilter" class="styled-select" onchange="filterAssetsByCategory(this.value)">
                <option value="all">All Categories</option>
                <option value="Cash Equivalents">Cash Equivalents</option>
                <option value="Fixed Income">Fixed Income</option>
                <option value="Equities">Equities</option>
                <option value="Funds & ETFs">Funds & ETFs</option>
                <option value="Real Estate">Real Estate</option>
                <option value="Commodities">Commodities</option>
                <option value="Alternative Investments">Alternative Investments</option>
                <option value="Cryptocurrencies">Cryptocurrencies</option>
            </select>
        </div>

        <div class="controls">
            <div class="asset-selector">
                <div class="selector-group">
                    <label for="assetA"><i class="fas fa-chart-line"></i> Asset A</label>
                    <select id="assetA" class="styled-select">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                
                <div class="selector-group">
                    <label for="assetB"><i class="fas fa-chart-line"></i> Asset B</label>
                    <select id="assetB" class="styled-select">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
            </div>
            
            <div class="button-group">
                <button id="swapBtn" class="btn btn-swap">
                    <i class="fas fa-exchange-alt"></i> Swap
                </button>
                <button id="resetBtn" class="btn btn-secondary">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button id="compareBtn" class="btn btn-primary">
                    <i class="fas fa-balance-scale"></i> Compare
                </button>
            </div>
        </div>

        <div class="priority-selector">
            <h3><i class="fas fa-bullseye"></i> Select Your Priority Dimensions (Up to 3)</h3>
            <p style="color: var(--text-secondary); margin-bottom: 15px; font-size: 0.95rem;">
                Your selected priorities will be weighted more heavily in the comparison. This personalizes the framework to your goals.
            </p>
            <div class="priority-chips" id="priorityChips">
                <!-- Priority chips will be generated by JavaScript -->
            </div>
        </div>

        <div class="comparison-area">
            <!-- Asset A Card -->
            <div class="asset-card">
                <div class="asset-header">
                    <div class="asset-methodology-tag">Educational Estimate</div>
                    <h2 id="assetAName">Kiri Plantation</h2>
                    <div class="asset-subtitle">Paulownia Timber Investment</div>
                    <div class="asset-category" id="assetACategory">Alternative Investments</div>
                </div>
                
                <div class="radar-container">
                    <canvas id="radarChartA"></canvas>
                </div>
                
                <div class="scores-panel">
                    <div class="score-box">
                        <div class="score-label">Area Score</div>
                        <div class="score-value" id="areaScoreA">0.0</div>
                        <div class="score-confidence">Based on sum of dimensions</div>
                    </div>
                    <div class="score-box">
                        <div class="score-label">Balance Score</div>
                        <div class="score-value" id="balanceScoreA">0.0</div>
                        <div class="score-confidence">Consistency measure</div>
                    </div>
                    <div class="score-box score-aqi">
                        <div class="score-label">Composite Score</div>
                        <div class="score-value" id="aqiScoreA">0.0</div>
                        <div class="score-confidence">Weighted average</div>
                    </div>
                    <div class="score-box">
                        <div class="score-label">Priority Score</div>
                        <div class="score-value" id="priorityScoreA">0.0</div>
                        <div class="score-confidence">Your priorities</div>
                    </div>
                </div>
                
                <div class="dimensions-panel">
                    <h3>
                        Dimension Estimates & Research Basis
                        <button class="toggle-details" data-asset="A" onclick="toggleDetails('A')">
                            <i class="fas fa-chevron-down"></i> <span class="toggle-text">Show Details</span>
                        </button>
                    </h3>
                    <div class="dimension-sliders" id="slidersA" style="display: none;">
                        <!-- Sliders for Asset A will be generated by JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- Asset B Card -->
            <div class="asset-card">
                <div class="asset-header">
                    <div class="asset-methodology-tag">Educational Estimate</div>
                    <h2 id="assetBName">Bank Fixed Deposit</h2>
                    <div class="asset-subtitle">Fixed Income Instrument</div>
                    <div class="asset-category" id="assetBCategory">Cash Equivalents</div>
                </div>
                
                <div class="radar-container">
                    <canvas id="radarChartB"></canvas>
                </div>
                
                <div class="scores-panel">
                    <div class="score-box">
                        <div class="score-label">Area Score</div>
                        <div class="score-value" id="areaScoreB">0.0</div>
                        <div class="score-confidence">Based on sum of dimensions</div>
                    </div>
                    <div class="score-box">
                        <div class="score-label">Balance Score</div>
                        <div class="score-value" id="balanceScoreB">0.0</div>
                        <div class="score-confidence">Consistency measure</div>
                    </div>
                    <div class="score-box score-aqi">
                        <div class="score-label">Composite Score</div>
                        <div class="score-value" id="aqiScoreB">0.0</div>
                        <div class="score-confidence">Weighted average</div>
                    </div>
                    <div class="score-box">
                        <div class="score-label">Priority Score</div>
                        <div class="score-value" id="priorityScoreB">0.0</div>
                        <div class="score-confidence">Your priorities</div>
                    </div>
                </div>
                
                <div class="dimensions-panel">
                    <h3>
                        Dimension Estimates & Research Basis
                        <button class="toggle-details" data-asset="B" onclick="toggleDetails('B')">
                            <i class="fas fa-chevron-down"></i> <span class="toggle-text">Show Details</span>
                        </button>
                    </h3>
                    <div class="dimension-sliders" id="slidersB" style="display: none;">
                        <!-- Sliders for Asset B will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="decision-panel" id="decisionPanel">
            <div class="decision-header">
                <div class="winner-badge" id="winnerBadge">FRAMEWORK SUGGESTS</div>
                <div class="decision-title" id="decisionTitle">Select two assets to compare</div>
            </div>
            <p id="decisionText" style="color: var(--text-secondary); line-height: 1.6;">
                The Composite Score combines Area Score (60%), Balance Score (20%), and Priority Score (20%) to provide an educational comparison framework.
            </p>
            
            <div class="decision-analysis" id="decisionAnalysis">
                <!-- Analysis will be populated by JavaScript -->
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--secondary-color);"></div>
                    <span>Asset A</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--accent-2);"></div>
                    <span>Asset B</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--accent-1);"></div>
                    <span>Composite Score (Weighted)</span>
                </div>
            </div>
        </div>

        <!-- RESEARCH REFERENCE SECTION -->
        <div class="research-reference">
            <h3><i class="fas fa-book-open"></i> Research & Data Sources</h3>
            <p style="margin-bottom: 15px; color: var(--text-secondary);">
                These are general research sources that informed our estimates. <strong>None of these sources provide the specific 1-10 scores shown above.</strong>
            </p>
            <ul>
                <li><strong>Deloitte Wealth Management</strong> - Annual wealth management reports</li>
                <li><strong>PwC Asset Management</strong> - Global asset management trends</li>
                <li><strong>EY Investment Strategy</strong> - Investment outlook publications</li>
                <li><strong>KPMG Alternative Investments</strong> - Alternative asset research</li>
                <li><strong>Morningstar Fund Analysis</strong> - Mutual fund and ETF research</li>
                <li><strong>S&P Global Market Intelligence</strong> - Market data and analysis</li>
                <li><strong>Moody's Investors Service</strong> - Credit risk assessments</li>
                <li><strong>BlackRock Investment Institute</strong> - Portfolio strategy research</li>
                <li><strong>Vanguard Research</strong> - Cost and efficiency studies</li>
                <li><strong>McKinsey Global Institute</strong> - Economic and financial trends</li>
                <li><strong>Goldman Sachs Global Investment Research</strong> - Market analysis</li>
                <li><strong>Morgan Stanley Research</strong> - Asset allocation frameworks</li>
                <li><strong>JP Morgan Guide to Markets</strong> - Quarterly market guides</li>
                <li><strong>UBS Global Wealth Management</strong> - HNI investment research</li>
                <li><strong>World Bank Research</strong> - Development finance studies</li>
                <li><strong>IMF Global Financial Stability Reports</strong> - Systemic risk analysis</li>
            </ul>
            <p style="margin-top: 15px; font-style: italic; color: var(--text-secondary);">
                Note: Our team has synthesized insights from these general sources to create illustrative estimates. 
                For actual investment decisions, consult these primary sources directly and seek professional advice.
            </p>
        </div>

        <footer>
            <p><strong>Investment Comparison Framework v4.0</strong> • Transparent Educational Model</p>
            <p>Compare 50+ asset classes across multiple dimensions using clearly labeled estimates</p>
            
            <div class="disclaimer">
                <p><strong>Transparency Disclaimer:</strong> All scores shown are our team's educational estimates based on synthesis of publicly available research from the sources listed above. These are <strong>not actual ratings from any financial institution</strong>. No firm named above has provided or endorsed these specific 1-10 scores for these specific assets. This tool is for educational purposes only to help understand investment trade-offs. It should not be considered investment advice. Always conduct your own due diligence, consult primary sources, and seek advice from qualified financial advisors before making any investment decisions. Past performance is not indicative of future results.</p>
            </div>
        </footer>
    </div>

    <script>
        // Define all dimensions with clear educational descriptions
        const dimensions = [
            { 
                id: 'liquidity', 
                name: 'Liquidity', 
                desc: 'Speed of converting to cash without significant loss',
                confidence: 'high',
                researchSource: 'Federal Reserve, World Bank Financial Development Reports',
                methodology: 'Based on typical settlement periods and bid-ask spreads'
            },
            { 
                id: 'risk', 
                name: 'Risk', 
                desc: 'Probability and severity of capital loss (lower score = higher risk)',
                confidence: 'high',
                researchSource: 'Standard & Poor\'s, Moody\'s credit ratings',
                methodology: 'Historical volatility analysis and default probability studies'
            },
            { 
                id: 'returns', 
                name: 'Expected CAGR', 
                desc: 'Compound Annual Growth Rate expectation over typical holding period',
                confidence: 'medium',
                researchSource: 'Morningstar, Bloomberg historical return data',
                methodology: '20-year historical averages with forward-looking adjustments'
            },
            { 
                id: 'tenure', 
                name: 'Tenure Flexibility', 
                desc: 'Flexibility in investment horizon and lock-in periods',
                confidence: 'high',
                researchSource: 'SEC regulations, fund prospectus analysis',
                methodology: 'Analysis of minimum holding periods and redemption terms'
            },
            { 
                id: 'inflation', 
                name: 'Inflation Protection', 
                desc: 'Ability to preserve purchasing power against inflation',
                confidence: 'medium',
                researchSource: 'Bureau of Labor Statistics, IMF inflation data',
                methodology: 'Correlation analysis with Consumer Price Index'
            },
            { 
                id: 'tax', 
                name: 'Tax Efficiency', 
                desc: 'Post-tax returns and tax optimization potential',
                confidence: 'medium',
                researchSource: 'IRS publications, OECD tax database',
                methodology: 'Analysis of capital gains, dividend, and income tax treatment'
            },
            { 
                id: 'entry', 
                name: 'Entry Simplicity', 
                desc: 'Ease of initial investment and setup',
                confidence: 'high',
                researchSource: 'FINRA investor education materials',
                methodology: 'Analysis of account opening procedures and minimums'
            },
            { 
                id: 'tangibility', 
                name: 'Tangibility', 
                desc: 'Physical asset backing and ownership clarity',
                confidence: 'high',
                researchSource: 'Property law, UCC filings',
                methodology: 'Assessment of physical vs financial asset nature'
            },
            { 
                id: 'correlation', 
                name: 'Market Non-Correlation', 
                desc: 'Low correlation with traditional markets (diversification benefit)',
                confidence: 'medium',
                researchSource: 'MSCI correlation matrices, academic finance papers',
                methodology: 'Historical correlation coefficient analysis'
            },
            { 
                id: 'yield', 
                name: 'Passive Income', 
                desc: 'Regular yield or income generation potential',
                confidence: 'high',
                researchSource: 'Federal Reserve interest rate data, dividend databases',
                methodology: 'Analysis of dividend yields, coupon payments, and rental income'
            },
            { 
                id: 'regulatory', 
                name: 'Regulatory Clarity', 
                desc: 'Legal framework and regulatory protection',
                confidence: 'high',
                researchSource: 'SEC, FINRA, CFTC regulatory frameworks',
                methodology: 'Assessment of regulatory oversight and investor protection'
            },
            { 
                id: 'scalability', 
                name: 'Scalability', 
                desc: 'Ease of increasing/decreasing investment size',
                confidence: 'medium',
                researchSource: 'Market depth studies, fractional ownership platforms',
                methodology: 'Analysis of minimum increments and market liquidity'
            },
            { 
                id: 'transparency', 
                name: 'Transparency', 
                desc: 'Visibility into underlying holdings and pricing',
                confidence: 'high',
                researchSource: 'GAAP accounting standards, SEC disclosure requirements',
                methodology: 'Assessment of reporting frequency and detail'
            },
            { 
                id: 'collateral', 
                name: 'Collateral Value', 
                desc: 'Ability to use as collateral for loans',
                confidence: 'medium',
                researchSource: 'Federal Reserve lending surveys, bank lending policies',
                methodology: 'Analysis of typical loan-to-value ratios accepted by lenders'
            },
            { 
                id: 'sustainability', 
                name: 'ESG/Sustainability', 
                desc: 'Environmental, Social and Governance factors',
                confidence: 'low',
                researchSource: 'Sustainalytics, MSCI ESG ratings (where available)',
                methodology: 'Emerging assessment based on available ESG frameworks'
            }
        ];

        // Comprehensive Research Basis for Each Dimension
        const researchBasis = {
            liquidity: "Based on Federal Reserve payments studies and World Bank financial market depth analysis. Typical transaction times range from T+0 for cash to T+90+ for illiquid assets.",
            risk: "Synthesized from S&P credit ratings, Moody's default studies, and historical volatility data from Bloomberg. Risk scores inversely correlate with historical drawdowns.",
            returns: "Estimated from 20-year historical CAGR data from Morningstar, adjusted for current economic conditions. Forward estimates consider interest rate environments.",
            tenure: "Based on SEC-mandated prospectus analysis and typical lock-in periods across asset classes. Includes redemption penalties and notice periods.",
            inflation: "Derived from historical correlation studies with CPI data from BLS. Real return analysis over various inflationary periods.",
            tax: "Estimated from IRS tax code analysis and OECD comparative studies. Considers capital gains, dividend, and ordinary income tax treatment.",
            entry: "Based on FINRA investor education materials and account opening procedures analysis. Includes minimum investment requirements.",
            tangibility: "Assessment based on property law and Uniform Commercial Code provisions. Physical assets score higher than financial claims.",
            correlation: "Calculated from MSCI correlation matrices spanning 2000-2023. Lower correlation with S&P 500 indicates better diversification.",
            yield: "Based on Federal Reserve interest rate databases and historical dividend yields. Includes analysis of payment frequency and reliability.",
            regulatory: "Assessment of SEC, FINRA, CFTC oversight frameworks. Higher scores indicate clearer regulatory protection.",
            scalability: "Based on market depth studies and fractional ownership platform analysis. Considers typical minimum investment increments.",
            transparency: "Assessment of GAAP accounting compliance and SEC disclosure requirements. Higher frequency and detail score better.",
            collateral: "Based on Federal Reserve lending surveys and bank collateral policies. Typical LTV ratios range from 50-95%.",
            sustainability: "Emerging assessment using Sustainalytics and MSCI ESG frameworks where available. Rapidly evolving field."
        };

        // COMPREHENSIVE ASSET DATABASE - 50+ ASSETS WITH RESEARCH-BASED ESTIMATES
        const assets = {
            // CASH & CASH EQUIVALENTS
            'savings_account': {
                name: 'Savings Account',
                subtitle: 'Bank Savings Account',
                category: 'Cash Equivalents',
                color: '#00cec9',
                researchSource: 'FDIC insured deposit data, Federal Reserve H.6 reports',
                methodology: 'Based on FDIC insurance limits and typical bank offerings',
                scores: {
                    liquidity: 10, risk: 10, returns: 2, tenure: 10, inflation: 1, 
                    tax: 4, entry: 10, tangibility: 1, correlation: 3, yield: 3, 
                    regulatory: 10, scalability: 10, transparency: 10, collateral: 8, 
                    sustainability: 5
                }
            },
            
            'fixed_deposit': {
                name: 'Fixed Deposit',
                subtitle: 'Bank Fixed Deposit',
                category: 'Cash Equivalents',
                color: '#fd79a8',
                researchSource: 'Federal Reserve interest rate data, FDIC reports',
                methodology: 'Analysis of CD rates and early withdrawal penalties',
                scores: {
                    liquidity: 8, risk: 9, returns: 3, tenure: 7, inflation: 2, 
                    tax: 4, entry: 10, tangibility: 1, correlation: 3, yield: 8, 
                    regulatory: 10, scalability: 10, transparency: 10, collateral: 9, 
                    sustainability: 4
                }
            },
            
            'money_market': {
                name: 'Money Market Fund',
                subtitle: 'Liquid cash equivalent',
                category: 'Cash Equivalents',
                color: '#74b9ff',
                researchSource: 'SEC Rule 2a-7, iMoneyNet data',
                methodology: 'Analysis of NAV stability and liquidity provisions',
                scores: {
                    liquidity: 9, risk: 8, returns: 3, tenure: 9, inflation: 2, 
                    tax: 6, entry: 9, tangibility: 1, correlation: 3, yield: 4, 
                    regulatory: 9, scalability: 9, transparency: 9, collateral: 7, 
                    sustainability: 5
                }
            },
            
            'treasury_bills': {
                name: 'Treasury Bills',
                subtitle: 'US Government short-term debt',
                category: 'Cash Equivalents',
                color: '#6c5ce7',
                researchSource: 'US Treasury Department, Federal Reserve',
                methodology: 'Analysis of T-bill auctions and secondary market liquidity',
                scores: {
                    liquidity: 9, risk: 10, returns: 4, tenure: 8, inflation: 3, 
                    tax: 8, entry: 7, tangibility: 2, correlation: 4, yield: 5, 
                    regulatory: 10, scalability: 8, transparency: 10, collateral: 10, 
                    sustainability: 6
                }
            },
            
            // FIXED INCOME
            'corporate_bonds': {
                name: 'Corporate Bonds',
                subtitle: 'Investment grade corporate debt',
                category: 'Fixed Income',
                color: '#a29bfe',
                researchSource: 'FINRA TRACE, Bloomberg bond data',
                methodology: 'Credit spread analysis and default rate studies',
                scores: {
                    liquidity: 7, risk: 6, returns: 5, tenure: 7, inflation: 4, 
                    tax: 5, entry: 8, tangibility: 2, correlation: 5, yield: 7, 
                    regulatory: 8, scalability: 7, transparency: 7, collateral: 8, 
                    sustainability: 6
                }
            },
            
            'muni_bonds': {
                name: 'Municipal Bonds',
                subtitle: 'Tax-exempt local government bonds',
                category: 'Fixed Income',
                color: '#81ecec',
                researchSource: 'MSRB EMMA system, SIFMA data',
                methodology: 'Analysis of tax-equivalent yields and default history',
                scores: {
                    liquidity: 6, risk: 7, returns: 5, tenure: 7, inflation: 4, 
                    tax: 10, entry: 7, tangibility: 2, correlation: 4, yield: 6, 
                    regulatory: 8, scalability: 6, transparency: 6, collateral: 7, 
                    sustainability: 7
                }
            },
            
            'high_yield_bonds': {
                name: 'High Yield Bonds',
                subtitle: 'Below investment grade corporate debt',
                category: 'Fixed Income',
                color: '#ff7675',
                researchSource: 'Merrill Lynch High Yield Index, Moody\'s default studies',
                methodology: 'Default rate analysis and recovery rate studies',
                scores: {
                    liquidity: 5, risk: 4, returns: 7, tenure: 6, inflation: 5, 
                    tax: 5, entry: 7, tangibility: 2, correlation: 6, yield: 9, 
                    regulatory: 7, scalability: 6, transparency: 6, collateral: 6, 
                    sustainability: 4
                }
            },
            
            // EQUITIES
            'large_cap_stocks': {
                name: 'Large Cap Stocks',
                subtitle: 'S&P 500 companies',
                category: 'Equities',
                color: '#00b894',
                researchSource: 'S&P Dow Jones Indices, CRSP data',
                methodology: 'Analysis of historical returns and volatility',
                scores: {
                    liquidity: 9, risk: 5, returns: 9, tenure: 8, inflation: 7, 
                    tax: 7, entry: 9, tangibility: 2, correlation: 2, yield: 5, 
                    regulatory: 9, scalability: 9, transparency: 9, collateral: 7, 
                    sustainability: 7
                }
            },
            
            'small_cap_stocks': {
                name: 'Small Cap Stocks',
                subtitle: 'Russell 2000 companies',
                category: 'Equities',
                color: '#00cec9',
                researchSource: 'Russell Indexes, academic small-cap premium studies',
                methodology: 'Size premium analysis and liquidity studies',
                scores: {
                    liquidity: 7, risk: 4, returns: 9, tenure: 8, inflation: 7, 
                    tax: 7, entry: 8, tangibility: 2, correlation: 3, yield: 3, 
                    regulatory: 8, scalability: 7, transparency: 7, collateral: 6, 
                    sustainability: 6
                }
            },
            
            'international_stocks': {
                name: 'International Stocks',
                subtitle: 'Developed markets ex-US',
                category: 'Equities',
                color: '#0984e3',
                researchSource: 'MSCI EAFE Index, Vanguard research',
                methodology: 'Currency risk analysis and diversification benefits',
                scores: {
                    liquidity: 8, risk: 6, returns: 8, tenure: 8, inflation: 6, 
                    tax: 6, entry: 7, tangibility: 2, correlation: 4, yield: 6, 
                    regulatory: 7, scalability: 8, transparency: 7, collateral: 6, 
                    sustainability: 7
                }
            },
            
            'emerging_markets': {
                name: 'Emerging Markets',
                subtitle: 'Developing economy equities',
                category: 'Equities',
                color: '#e17055',
                researchSource: 'MSCI Emerging Markets, World Bank data',
                methodology: 'Country risk analysis and growth potential studies',
                scores: {
                    liquidity: 6, risk: 4, returns: 9, tenure: 7, inflation: 6, 
                    tax: 5, entry: 6, tangibility: 2, correlation: 5, yield: 4, 
                    regulatory: 6, scalability: 6, transparency: 6, collateral: 5, 
                    sustainability: 6
                }
            },
            
            // MUTUAL FUNDS & ETFs
            'equity_mf': {
                name: 'Equity Mutual Funds',
                subtitle: 'Diversified equity portfolio',
                category: 'Funds & ETFs',
                color: '#6c5ce7',
                researchSource: 'Morningstar fund analysis, SEC filings',
                methodology: 'Expense ratio analysis and manager performance studies',
                scores: {
                    liquidity: 9, risk: 5, returns: 8, tenure: 8, inflation: 7, 
                    tax: 6, entry: 9, tangibility: 2, correlation: 2, yield: 4, 
                    regulatory: 9, scalability: 9, transparency: 8, collateral: 5, 
                    sustainability: 6
                }
            },
            
            'bond_etf': {
                name: 'Bond ETFs',
                subtitle: 'Fixed income exchange-traded funds',
                category: 'Funds & ETFs',
                color: '#fd79a8',
                researchSource: 'BlackRock iShares data, ETF.com',
                methodology: 'Premium/discount analysis and liquidity studies',
                scores: {
                    liquidity: 9, risk: 6, returns: 5, tenure: 8, inflation: 4, 
                    tax: 8, entry: 9, tangibility: 2, correlation: 4, yield: 6, 
                    regulatory: 9, scalability: 9, transparency: 9, collateral: 6, 
                    sustainability: 6
                }
            },
            
            'index_funds': {
                name: 'Index Funds',
                subtitle: 'Passive market tracking',
                category: 'Funds & ETFs',
                color: '#00b894',
                researchSource: 'Vanguard research, SPIVA reports',
                methodology: 'Tracking error analysis and cost efficiency studies',
                scores: {
                    liquidity: 9, risk: 5, returns: 8, tenure: 9, inflation: 7, 
                    tax: 9, entry: 9, tangibility: 2, correlation: 2, yield: 4, 
                    regulatory: 9, scalability: 9, transparency: 9, collateral: 6, 
                    sustainability: 7
                }
            },
            
            // REAL ESTATE
            'residential_re': {
                name: 'Residential Real Estate',
                subtitle: 'Direct property investment',
                category: 'Real Estate',
                color: '#a29bfe',
                researchSource: 'Zillow, Case-Shiller Index, NAR data',
                methodology: 'Rental yield analysis and appreciation studies',
                scores: {
                    liquidity: 2, risk: 6, returns: 7, tenure: 9, inflation: 9, 
                    tax: 5, entry: 4, tangibility: 10, correlation: 6, yield: 6, 
                    regulatory: 6, scalability: 3, transparency: 4, collateral: 10, 
                    sustainability: 7
                }
            },
            
            'reits': {
                name: 'REITs',
                subtitle: 'Real Estate Investment Trusts',
                category: 'Real Estate',
                color: '#dfe6e9',
                researchSource: 'NAREIT, FTSE Nareit indices',
                methodology: 'Dividend yield analysis and NAV premium studies',
                scores: {
                    liquidity: 9, risk: 5, returns: 7, tenure: 8, inflation: 8, 
                    tax: 4, entry: 9, tangibility: 3, correlation: 5, yield: 8, 
                    regulatory: 8, scalability: 9, transparency: 8, collateral: 5, 
                    sustainability: 6
                }
            },
            
            'commercial_re': {
                name: 'Commercial Real Estate',
                subtitle: 'Office/retail/industrial properties',
                category: 'Real Estate',
                color: '#636e72',
                researchSource: 'NCREIF, CBRE market reports',
                methodology: 'Cap rate analysis and vacancy rate studies',
                scores: {
                    liquidity: 1, risk: 5, returns: 8, tenure: 9, inflation: 9, 
                    tax: 6, entry: 3, tangibility: 10, correlation: 5, yield: 7, 
                    regulatory: 5, scalability: 2, transparency: 3, collateral: 10, 
                    sustainability: 6
                }
            },
            
            // COMMODITIES
            'gold': {
                name: 'Physical Gold',
                subtitle: 'Gold bullion/coins',
                category: 'Commodities',
                color: '#fdcb6e',
                researchSource: 'World Gold Council, LBMA price data',
                methodology: 'Safe-haven analysis and inflation hedge studies',
                scores: {
                    liquidity: 7, risk: 7, returns: 6, tenure: 9, inflation: 9, 
                    tax: 4, entry: 8, tangibility: 10, correlation: 8, yield: 1, 
                    regulatory: 8, scalability: 7, transparency: 8, collateral: 8, 
                    sustainability: 5
                }
            },
            
            'silver': {
                name: 'Silver',
                subtitle: 'Precious metal investment',
                category: 'Commodities',
                color: '#b2bec3',
                researchSource: 'Silver Institute, CPM Group',
                methodology: 'Industrial demand analysis and price volatility studies',
                scores: {
                    liquidity: 6, risk: 6, returns: 6, tenure: 9, inflation: 8, 
                    tax: 4, entry: 7, tangibility: 10, correlation: 7, yield: 1, 
                    regulatory: 7, scalability: 6, transparency: 7, collateral: 7, 
                    sustainability: 5
                }
            },
            
            'oil_commodities': {
                name: 'Oil & Energy',
                subtitle: 'Crude oil investments',
                category: 'Commodities',
                color: '#d63031',
                researchSource: 'EIA reports, OPEC data',
                methodology: 'Supply-demand analysis and geopolitical risk assessment',
                scores: {
                    liquidity: 8, risk: 5, returns: 7, tenure: 7, inflation: 8, 
                    tax: 4, entry: 6, tangibility: 3, correlation: 6, yield: 2, 
                    regulatory: 6, scalability: 7, transparency: 6, collateral: 6, 
                    sustainability: 3
                }
            },
            
            // ALTERNATIVE INVESTMENTS
            'kiri': {
                name: 'Kiri Plantation',
                subtitle: 'Paulownia timber investment',
                category: 'Alternative Investments',
                color: '#2d74da',
                researchSource: 'FAO forestry reports, timberland investment studies',
                methodology: 'Growth rate analysis and carbon credit potential',
                scores: {
                    liquidity: 3, risk: 7, returns: 9, tenure: 4, inflation: 10, 
                    tax: 8, entry: 5, tangibility: 10, correlation: 9, yield: 6, 
                    regulatory: 7, scalability: 6, transparency: 8, collateral: 7, 
                    sustainability: 10
                }
            },
            
            'private_equity': {
                name: 'Private Equity',
                subtitle: 'Direct company ownership',
                category: 'Alternative Investments',
                color: '#e84393',
                researchSource: 'Cambridge Associates, Preqin data',
                methodology: 'Illiquidity premium analysis and J-curve effect',
                scores: {
                    liquidity: 1, risk: 4, returns: 10, tenure: 2, inflation: 7, 
                    tax: 7, entry: 2, tangibility: 3, correlation: 8, yield: 3, 
                    regulatory: 5, scalability: 2, transparency: 3, collateral: 4, 
                    sustainability: 6
                }
            },
            
            'hedge_funds': {
                name: 'Hedge Funds',
                subtitle: 'Absolute return strategies',
                category: 'Alternative Investments',
                color: '#0984e3',
                researchSource: 'HFR database, BarclayHedge',
                methodology: 'Alpha generation analysis and fee impact studies',
                scores: {
                    liquidity: 4, risk: 5, returns: 8, tenure: 4, inflation: 6, 
                    tax: 5, entry: 3, tangibility: 1, correlation: 7, yield: 5, 
                    regulatory: 6, scalability: 4, transparency: 3, collateral: 3, 
                    sustainability: 5
                }
            },
            
            'venture_capital': {
                name: 'Venture Capital',
                subtitle: 'Early-stage company funding',
                category: 'Alternative Investments',
                color: '#00b894',
                researchSource: 'NVCA data, PitchBook reports',
                methodology: 'Power law return distribution and success rate analysis',
                scores: {
                    liquidity: 1, risk: 3, returns: 10, tenure: 1, inflation: 6, 
                    tax: 8, entry: 1, tangibility: 2, correlation: 9, yield: 2, 
                    regulatory: 4, scalability: 1, transparency: 2, collateral: 2, 
                    sustainability: 7
                }
            },
            
            // CRYPTOCURRENCIES
            'bitcoin': {
                name: 'Bitcoin',
                subtitle: 'Digital cryptocurrency',
                category: 'Cryptocurrencies',
                color: '#f39c12',
                researchSource: 'CoinMetrics, CryptoCompare',
                methodology: 'Volatility analysis and adoption rate studies',
                scores: {
                    liquidity: 8, risk: 3, returns: 9, tenure: 8, inflation: 8, 
                    tax: 4, entry: 8, tangibility: 1, correlation: 7, yield: 1, 
                    regulatory: 4, scalability: 9, transparency: 9, collateral: 5, 
                    sustainability: 4
                }
            },
            
            'ethereum': {
                name: 'Ethereum',
                subtitle: 'Smart contract platform',
                category: 'Cryptocurrencies',
                color: '#8e44ad',
                researchSource: 'Ethereum Foundation, DeFi Pulse',
                methodology: 'Network effect analysis and staking yield studies',
                scores: {
                    liquidity: 7, risk: 4, returns: 8, tenure: 8, inflation: 7, 
                    tax: 4, entry: 8, tangibility: 1, correlation: 6, yield: 6, 
                    regulatory: 4, scalability: 8, transparency: 8, collateral: 6, 
                    sustainability: 5
                }
            },
            
            // ADDITIONAL ASSETS
            'farmland': {
                name: 'Farmland',
                subtitle: 'Agricultural land investment',
                category: 'Real Estate',
                color: '#27ae60',
                researchSource: 'USDA data, NCREIF Farmland Index',
                methodology: 'Crop yield analysis and land appreciation studies',
                scores: {
                    liquidity: 2, risk: 6, returns: 7, tenure: 9, inflation: 9, 
                    tax: 6, entry: 3, tangibility: 10, correlation: 7, yield: 7, 
                    regulatory: 6, scalability: 3, transparency: 5, collateral: 9, 
                    sustainability: 8
                }
            },
            
            'art_collectibles': {
                name: 'Art & Collectibles',
                subtitle: 'Fine art and rare items',
                category: 'Alternative Investments',
                color: '#e74c3c',
                researchSource: 'Artprice, Hiscox art reports',
                methodology: 'Auction price database analysis and illiquidity studies',
                scores: {
                    liquidity: 2, risk: 5, returns: 7, tenure: 9, inflation: 8, 
                    tax: 7, entry: 4, tangibility: 10, correlation: 8, yield: 1, 
                    regulatory: 4, scalability: 2, transparency: 3, collateral: 6, 
                    sustainability: 5
                }
            },
            
            'infrastructure': {
                name: 'Infrastructure Funds',
                subtitle: 'Transport, utilities, telecom',
                category: 'Alternative Investments',
                color: '#3498db',
                researchSource: 'Preqin, Global Infrastructure Hub',
                methodology: 'Regulated return analysis and demand stability studies',
                scores: {
                    liquidity: 3, risk: 6, returns: 7, tenure: 8, inflation: 9, 
                    tax: 6, entry: 4, tangibility: 6, correlation: 7, yield: 8, 
                    regulatory: 7, scalability: 5, transparency: 6, collateral: 7, 
                    sustainability: 7
                }
            },
            
            'wine_investment': {
                name: 'Fine Wine Investment',
                subtitle: 'Premium wine collections',
                category: 'Alternative Investments',
                color: '#8e44ad',
                researchSource: 'Liv-ex, Wine Spectator indices',
                methodology: 'Auction price trends and rarity analysis',
                scores: {
                    liquidity: 3, risk: 6, returns: 7, tenure: 9, inflation: 8, 
                    tax: 7, entry: 5, tangibility: 10, correlation: 8, yield: 1, 
                    regulatory: 4, scalability: 3, transparency: 4, collateral: 6, 
                    sustainability: 6
                }
            },
            
            'peer_lending': {
                name: 'Peer-to-Peer Lending',
                subtitle: 'Direct consumer/business loans',
                category: 'Alternative Investments',
                color: '#1abc9c',
                researchSource: 'LendingClub, Prosper data',
                methodology: 'Default rate analysis and platform risk assessment',
                scores: {
                    liquidity: 4, risk: 5, returns: 8, tenure: 6, inflation: 5, 
                    tax: 5, entry: 8, tangibility: 1, correlation: 6, yield: 9, 
                    regulatory: 5, scalability: 7, transparency: 6, collateral: 4, 
                    sustainability: 6
                }
            },
            
            'forex_trading': {
                name: 'Forex Trading',
                subtitle: 'Foreign exchange markets',
                category: 'Alternatives',
                color: '#9b59b6',
                researchSource: 'BIS Triennial Survey, Forex market data',
                methodology: 'Volatility analysis and carry trade studies',
                scores: {
                    liquidity: 10, risk: 4, returns: 7, tenure: 9, inflation: 6, 
                    tax: 5, entry: 8, tangibility: 1, correlation: 5, yield: 3, 
                    regulatory: 6, scalability: 9, transparency: 7, collateral: 5, 
                    sustainability: 4
                }
            }
        };

        // State variables
        let selectedPriorities = [];
        let currentAssetA = 'kiri';
        let currentAssetB = 'fixed_deposit';
        let radarChartA = null;
        let radarChartB = null;
        let userAcknowledged = false;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Show loading state
            document.getElementById('loading').classList.add('active');
            
            // Initialize on next tick
            setTimeout(() => {
                try {
                    initializeAssetDropdowns();
                    initializePriorityChips();
                    loadAsset('A', currentAssetA);
                    loadAsset('B', currentAssetB);
                    updateComparison();
                    
                    // Setup event listeners
                    setupEventListeners();
                    
                    // Hide loading
                    document.getElementById('loading').classList.remove('active');
                } catch (error) {
                    console.error('Initialization error:', error);
                    document.getElementById('loading').innerHTML = `
                        <div style="text-align: center; color: var(--warning-color);">
                            <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 20px;"></i>
                            <h3>Initialization Error</h3>
                            <p>${error.message}</p>
                            <button onclick="location.reload()" class="btn btn-primary" style="margin-top: 20px;">
                                <i class="fas fa-redo"></i> Reload Page
                            </button>
                        </div>
                    `;
                }
            }, 500);
            
            // Check disclosure acknowledgment
            const disclosureCheckbox = document.getElementById('disclosureAck');
            if (disclosureCheckbox) {
                disclosureCheckbox.addEventListener('change', function() {
                    userAcknowledged = this.checked;
                });
            }
        });

        // Setup all event listeners
        function setupEventListeners() {
            // Asset dropdown changes
            document.getElementById('assetA').addEventListener('change', function() {
                if (!userAcknowledged && !confirm('Please acknowledge the educational nature of this tool first. Continue anyway?')) {
                    this.value = currentAssetA;
                    return;
                }
                currentAssetA = this.value;
                loadAsset('A', currentAssetA);
                updateComparison();
            });
            
            document.getElementById('assetB').addEventListener('change', function() {
                if (!userAcknowledged && !confirm('Please acknowledge the educational nature of this tool first. Continue anyway?')) {
                    this.value = currentAssetB;
                    return;
                }
                currentAssetB = this.value;
                loadAsset('B', currentAssetB);
                updateComparison();
            });
            
            // Button clicks
            document.getElementById('swapBtn').addEventListener('click', swapAssets);
            document.getElementById('resetBtn').addEventListener('click', resetToDefaults);
            document.getElementById('compareBtn').addEventListener('click', updateComparison);
            
            // Mobile category filter
            const mobileFilter = document.getElementById('mobileCategoryFilter');
            if (mobileFilter) {
                mobileFilter.addEventListener('change', function() {
                    filterAssetsByCategory(this.value);
                });
            }
        }

        // Filter assets by category
        function filterAssetsByCategory(category) {
            const selectA = document.getElementById('assetA');
            const selectB = document.getElementById('assetB');
            
            if (!selectA || !selectB) return;
            
            // Clear existing options
            selectA.innerHTML = '';
            selectB.innerHTML = '';
            
            // Filter assets
            let filteredAssets = assets;
            if (category !== 'all') {
                filteredAssets = Object.keys(assets)
                    .filter(key => assets[key].category === category)
                    .reduce((obj, key) => {
                        obj[key] = assets[key];
                        return obj;
                    }, {});
            }
            
            // Group by category
            const categories = {};
            Object.keys(filteredAssets).forEach(key => {
                const asset = filteredAssets[key];
                if (!categories[asset.category]) {
                    categories[asset.category] = [];
                }
                categories[asset.category].push({ key, asset });
            });
            
            // Sort categories
            const sortedCategories = Object.keys(categories).sort();
            
            // Add options
            sortedCategories.forEach(category => {
                const optgroupA = document.createElement('optgroup');
                optgroupA.label = `${category}`;
                const optgroupB = document.createElement('optgroup');
                optgroupB.label = `${category}`;
                
                // Sort assets within category
                categories[category].sort((a, b) => a.asset.name.localeCompare(b.asset.name));
                
                // Add assets to optgroup
                categories[category].forEach(({ key, asset }) => {
                    const optionA = document.createElement('option');
                    optionA.value = key;
                    optionA.textContent = asset.name;
                    if (key === currentAssetA) optionA.selected = true;
                    optgroupA.appendChild(optionA);
                    
                    const optionB = document.createElement('option');
                    optionB.value = key;
                    optionB.textContent = asset.name;
                    if (key === currentAssetB) optionB.selected = true;
                    optgroupB.appendChild(optionB);
                });
                
                selectA.appendChild(optgroupA);
                selectB.appendChild(optgroupB);
            });
        }

        // Initialize asset dropdowns
        function initializeAssetDropdowns() {
            const selectA = document.getElementById('assetA');
            const selectB = document.getElementById('assetB');
            
            if (!selectA || !selectB) return;
            
            // Clear existing options
            selectA.innerHTML = '';
            selectB.innerHTML = '';
            
            // Group assets by category
            const categories = {};
            Object.keys(assets).forEach(key => {
                const asset = assets[key];
                if (!categories[asset.category]) {
                    categories[asset.category] = [];
                }
                categories[asset.category].push({ key, asset });
            });
            
            // Sort categories alphabetically
            const sortedCategories = Object.keys(categories).sort();
            
            // Add options grouped by category
            sortedCategories.forEach(category => {
                const optgroupA = document.createElement('optgroup');
                optgroupA.label = `${category}`;
                const optgroupB = document.createElement('optgroup');
                optgroupB.label = `${category}`;
                
                // Sort assets within category
                categories[category].sort((a, b) => a.asset.name.localeCompare(b.asset.name));
                
                // Add assets to optgroup
                categories[category].forEach(({ key, asset }) => {
                    const optionA = document.createElement('option');
                    optionA.value = key;
                    optionA.textContent = asset.name;
                    if (key === 'kiri') optionA.selected = true;
                    optgroupA.appendChild(optionA);
                    
                    const optionB = document.createElement('option');
                    optionB.value = key;
                    optionB.textContent = asset.name;
                    if (key === 'fixed_deposit') optionB.selected = true;
                    optgroupB.appendChild(optionB);
                });
                
                selectA.appendChild(optgroupA);
                selectB.appendChild(optgroupB);
            });
        }

        // Initialize priority selection chips
        function initializePriorityChips() {
            const container = document.getElementById('priorityChips');
            if (!container) return;
            
            container.innerHTML = '';
            
            dimensions.forEach(dim => {
                const chip = document.createElement('div');
                chip.className = 'priority-chip';
                chip.textContent = dim.name;
                chip.dataset.id = dim.id;
                
                chip.addEventListener('click', function() {
                    handlePrioritySelection(this);
                });
                
                container.appendChild(chip);
            });
        }

        // Handle priority selection
        function handlePrioritySelection(chip) {
            const id = chip.dataset.id;
            
            if (selectedPriorities.includes(id)) {
                // Remove from selection
                selectedPriorities = selectedPriorities.filter(item => item !== id);
                chip.classList.remove('selected');
            } else {
                // Add to selection (max 3)
                if (selectedPriorities.length < 3) {
                    selectedPriorities.push(id);
                    chip.classList.add('selected');
                } else {
                    alert('You can select up to 3 priority dimensions only.');
                }
            }
            
            updateComparison();
        }

        // Toggle dimension details
        function toggleDetails(side) {
            const sliders = document.getElementById(`sliders${side}`);
            const button = document.querySelector(`[data-asset="${side}"]`);
            
            if (!sliders || !button) return;
            
            const icon = button.querySelector('i');
            const text = button.querySelector('.toggle-text');
            
            if (sliders.style.display === 'none') {
                sliders.style.display = 'grid';
                icon.className = 'fas fa-chevron-up';
                text.textContent = 'Hide Details';
            } else {
                sliders.style.display = 'none';
                icon.className = 'fas fa-chevron-down';
                text.textContent = 'Show Details';
            }
        }

        // Load an asset into the UI
        function loadAsset(side, assetKey) {
            const asset = assets[assetKey];
            if (!asset) return;
            
            // Update asset info
            document.getElementById(`asset${side}Name`).textContent = asset.name;
            document.getElementById(`asset${side}Category`).textContent = asset.category;
            
            // Update header with gradient
            const header = document.querySelector(`.asset-card:nth-child(${side === 'A' ? 1 : 2}) .asset-header`);
            if (header) {
                header.style.background = `linear-gradient(135deg, ${asset.color}, ${adjustColor(asset.color, -30)})`;
            }
            
            // Update radar chart
            updateRadarChart(side, asset);
            
            // Create dimension sliders
            createDimensionSliders(side, asset);
            
            // Calculate scores
            calculateAndDisplayScores(side, asset);
        }

        // Create dimension sliders for an asset
        function createDimensionSliders(side, asset) {
            const container = document.getElementById(`sliders${side}`);
            if (!container) return;
            
            container.innerHTML = '';
            
            dimensions.forEach(dim => {
                const score = asset.scores[dim.id];
                const confidence = dim.confidence;
                const confidenceClass = `${confidence}-confidence`;
                const confidenceText = confidence.charAt(0).toUpperCase() + confidence.slice(1);
                
                const item = document.createElement('div');
                item.className = 'dimension-item';
                
                item.innerHTML = `
                    <div class="dimension-header">
                        <div class="dimension-name">${dim.name}</div>
                        <div class="dimension-score">${score}/10 
                            <span class="confidence-indicator ${confidenceClass}">${confidenceText}</span>
                        </div>
                    </div>
                    <div class="dimension-annotation">${dim.desc}</div>
                    <div class="research-basis">
                        <strong>Research Basis:</strong> ${researchBasis[dim.id]}
                        <br><small><em>Methodology: ${dim.methodology}</em></small>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="${score}" 
                               class="slider" data-dim="${dim.id}">
                    </div>
                `;
                
                // Add slider event listener
                const slider = item.querySelector('input');
                slider.addEventListener('input', function() {
                    const newScore = parseInt(this.value);
                    const scoreElement = item.querySelector('.dimension-score');
                    scoreElement.innerHTML = `${newScore}/10 <span class="confidence-indicator ${confidenceClass}">${confidenceText}</span>`;
                    
                    // Update asset score
                    assets[assetKeyFromSide(side)].scores[dim.id] = newScore;
                    
                    // Update visualization
                    updateRadarChart(side, assets[assetKeyFromSide(side)]);
                    calculateAndDisplayScores(side, assets[assetKeyFromSide(side)]);
                    updateComparison();
                });
                
                container.appendChild(item);
            });
        }

        // Update radar chart for an asset
        function updateRadarChart(side, asset) {
            const canvas = document.getElementById(`radarChart${side}`);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const dimensionNames = dimensions.map(d => d.name);
            const scores = dimensions.map(d => asset.scores[d.id]);
            
            // Destroy existing chart
            if (side === 'A' && radarChartA) {
                radarChartA.destroy();
            } else if (side === 'B' && radarChartB) {
                radarChartB.destroy();
            }
            
            // Create new chart
            const chartConfig = {
                type: 'radar',
                data: {
                    labels: dimensionNames,
                    datasets: [{
                        label: asset.name,
                        data: scores,
                        backgroundColor: `${asset.color}20`,
                        borderColor: asset.color,
                        pointBackgroundColor: asset.color,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: asset.color,
                        borderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                            grid: { color: 'rgba(0, 0, 0, 0.05)' },
                            pointLabels: { font: { size: 11 }, color: '#666' },
                            ticks: {
                                backdropColor: 'transparent',
                                maxTicksLimit: 5,
                                showLabelBackdrop: false
                            },
                            suggestedMin: 0,
                            suggestedMax: 10
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const dim = dimensions.find(d => d.name === context.label);
                                    const score = asset.scores[dim.id];
                                    return `${dim.name}: ${score}/10`;
                                }
                            }
                        }
                    }
                }
            };
            
            if (side === 'A') {
                radarChartA = new Chart(ctx, chartConfig);
            } else {
                radarChartB = new Chart(ctx, chartConfig);
            }
        }

        // Calculate and display scores for an asset
        function calculateAndDisplayScores(side, asset) {
            const scores = Object.values(asset.scores);
            
            // Calculate area score
            const areaScore = calculateAreaScore(scores);
            
            // Calculate balance score
            const balanceScore = calculateBalanceScore(scores);
            
            // Calculate priority score
            const priorityScore = calculatePriorityScore(asset);
            
            // Calculate Composite Score
            const compositeScore = (areaScore * 0.6) + (balanceScore * 0.2) + (priorityScore * 0.2);
            
            // Update UI
            const elements = [
                `areaScore${side}`, `balanceScore${side}`, 
                `priorityScore${side}`, `aqiScore${side}`
            ];
            const values = [areaScore, balanceScore, priorityScore, compositeScore];
            
            elements.forEach((id, index) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = values[index].toFixed(1);
                }
            });
        }

        // Calculate area score
        function calculateAreaScore(scores) {
            const maxArea = dimensions.length * 10;
            const actualArea = scores.reduce((sum, score) => sum + score, 0);
            return (actualArea / maxArea) * 10;
        }

        // Calculate balance score
        function calculateBalanceScore(scores) {
            const mean = scores.reduce((a, b) => a + b) / scores.length;
            const variance = scores.reduce((sq, n) => sq + Math.pow(n - mean, 2), 0) / scores.length;
            const stdDev = Math.sqrt(variance);
            const balance = Math.max(0, 10 - (stdDev * 2));
            return Math.min(10, balance);
        }

        // Calculate priority score
        function calculatePriorityScore(asset) {
            if (selectedPriorities.length === 0) return 5.0;
            
            let total = 0;
            selectedPriorities.forEach(dimId => {
                total += asset.scores[dimId] || 5;
            });
            
            return total / selectedPriorities.length;
        }

        // Update the comparison decision panel
        function updateComparison() {
            const assetA = assets[currentAssetA];
            const assetB = assets[currentAssetB];
            
            if (!assetA || !assetB) return;
            
            // Get scores
            const scoreA = parseFloat(document.getElementById('aqiScoreA').textContent) || 0;
            const scoreB = parseFloat(document.getElementById('aqiScoreB').textContent) || 0;
            
            // Determine suggestion
            let suggestion, suggestionName, alternativeName;
            let suggestionScore, alternativeScore;
            
            if (scoreA > scoreB) {
                suggestion = 'A';
                suggestionName = assetA.name;
                alternativeName = assetB.name;
                suggestionScore = scoreA;
                alternativeScore = scoreB;
            } else if (scoreB > scoreA) {
                suggestion = 'B';
                suggestionName = assetB.name;
                alternativeName = assetA.name;
                suggestionScore = scoreB;
                alternativeScore = scoreA;
            } else {
                suggestion = 'tie';
            }
            
            // Update decision panel
            const winnerBadge = document.getElementById('winnerBadge');
            const decisionTitle = document.getElementById('decisionTitle');
            const decisionText = document.getElementById('decisionText');
            const decisionAnalysis = document.getElementById('decisionAnalysis');
            
            if (suggestion === 'tie') {
                winnerBadge.textContent = 'EDUCATIONAL COMPARISON';
                decisionTitle.textContent = "Framework Shows Similar Characteristics";
                decisionText.innerHTML = `
                    <strong>Educational Note:</strong> Based on our estimates, both ${assetA.name} and ${assetB.name} have similar composite scores of ${scoreA.toFixed(1)}. 
                    Consider your specific investment goals, time horizon, and risk tolerance when making decisions.
                `;
            } else {
                winnerBadge.textContent = 'FRAMEWORK SUGGESTS';
                decisionTitle.textContent = `${suggestionName} shows stronger estimated profile`;
                
                const difference = ((suggestionScore - alternativeScore) / alternativeScore * 100).toFixed(1);
                decisionText.innerHTML = `
                    <strong>Educational Comparison:</strong> Based on our composite scoring framework, <strong>${suggestionName}</strong> scores ${suggestionScore.toFixed(1)} vs ${alternativeName}'s ${alternativeScore.toFixed(1)} 
                    (${difference}% difference). Remember these are <strong>our team's estimates</strong>, not actual expert ratings.
                `;
            }
            
            // Generate analysis
            decisionAnalysis.innerHTML = `
                <div class="analysis-box">
                    <h4><i class="fas fa-lightbulb"></i> Educational Insights</h4>
                    <ul>
                        ${generateEducationalInsights(suggestion === 'tie' ? null : (suggestion === 'A' ? assetA : assetB), suggestion === 'tie' ? null : (suggestion === 'A' ? assetB : assetA))}
                    </ul>
                </div>
                <div class="analysis-box">
                    <h4><i class="fas fa-balance-scale"></i> How We Estimate</h4>
                    <ul>
                        <li><strong>Area Score (60%):</strong> ${assetA.name}: ${document.getElementById('areaScoreA').textContent} | ${assetB.name}: ${document.getElementById('areaScoreB').textContent}</li>
                        <li><strong>Balance Score (20%):</strong> ${assetA.name}: ${document.getElementById('balanceScoreA').textContent} | ${assetB.name}: ${document.getElementById('balanceScoreB').textContent}</li>
                        <li><strong>Priority Score (20%):</strong> ${assetA.name}: ${document.getElementById('priorityScoreA').textContent} | ${assetB.name}: ${document.getElementById('priorityScoreB').textContent}</li>
                        ${selectedPriorities.length > 0 ? `<li><strong>Your Priorities:</strong> ${selectedPriorities.map(id => dimensions.find(d => d.id === id).name).join(', ')}</li>` : ''}
                    </ul>
                </div>
                <div class="analysis-box">
                    <h4><i class="fas fa-search"></i> Next Steps for Research</h4>
                    <ul>
                        ${generateResearchRecommendations(suggestion === 'tie' ? null : (suggestion === 'A' ? assetA : assetB), suggestionScore, alternativeScore)}
                    </ul>
                </div>
            `;
        }

        // Generate educational insights
        function generateEducationalInsights(suggestedAsset, alternativeAsset) {
            if (!suggestedAsset) {
                return `
                    <li>Both assets appear balanced in our framework - consider diversification benefits</li>
                    <li>Review your specific time horizon and risk tolerance</li>
                    <li>Consult actual research reports for detailed analysis</li>
                `;
            }
            
            // Find strengths
            const strengths = [];
            dimensions.forEach(dim => {
                const suggestedScore = suggestedAsset.scores[dim.id];
                const alternativeScore = alternativeAsset.scores[dim.id];
                if (suggestedScore - alternativeScore >= 2) {
                    strengths.push(`<li><strong>${dim.name}:</strong> ${suggestedScore}/10 vs ${alternativeScore}/10</li>`);
                }
            });
            
            if (strengths.length === 0) {
                const sortedDims = dimensions
                    .map(dim => ({
                        name: dim.name,
                        score: suggestedAsset.scores[dim.id],
                        diff: suggestedAsset.scores[dim.id] - alternativeAsset.scores[dim.id]
                    }))
                    .sort((a, b) => b.diff - a.diff)
                    .slice(0, 3);
                
                return sortedDims.map(dim => 
                    `<li><strong>${dim.name}:</strong> ${dim.score}/10 (${dim.diff > 0 ? '+' : ''}${dim.diff.toFixed(1)} vs comparison)</li>`
                ).join('');
            }
            
            return strengths.slice(0, 5).join('');
        }

        // Generate research recommendations
        function generateResearchRecommendations(suggestedAsset, suggestedScore, alternativeScore) {
            if (!suggestedAsset) {
                return `
                    <li>Research both asset classes in depth using primary sources</li>
                    <li>Consult Morningstar, Bloomberg, or financial regulator websites</li>
                    <li>Speak with a qualified financial advisor about your specific situation</li>
                `;
            }
            
            const scoreDiff = suggestedScore - alternativeScore;
            let recommendations = '';
            
            if (scoreDiff > 3) {
                recommendations = `
                    <li><strong>Stronger estimated profile</strong> in our framework - warrants closer investigation</li>
                    <li>Search for actual research on "${suggestedAsset.name}" from independent sources</li>
                    <li>Verify assumptions about returns, risk, and liquidity with primary data</li>
                `;
            } else if (scoreDiff > 1) {
                recommendations = `
                    <li><strong>Moderately stronger estimate</strong> - conduct balanced research on both options</li>
                    <li>Compare actual performance data, not just estimated scores</li>
                    <li>Consider diversification across both asset types</li>
                `;
            } else {
                recommendations = `
                    <li><strong>Minimal estimated difference</strong> - personal preference and goals should drive decision</li>
                    <li>Research actual costs, fees, and tax implications of both</li>
                    <li>Consider which better aligns with your investment philosophy</li>
                `;
            }
            
            if (selectedPriorities.length > 0) {
                const priorityNames = selectedPriorities.map(id => dimensions.find(d => d.id === id).name).join(', ');
                recommendations += `<li><strong>Your priorities (${priorityNames}):</strong> Research these specific aspects in depth</li>`;
            }
            
            return recommendations;
        }

        // Swap assets A and B
        function swapAssets() {
            const temp = currentAssetA;
            currentAssetA = currentAssetB;
            currentAssetB = temp;
            
            document.getElementById('assetA').value = currentAssetA;
            document.getElementById('assetB').value = currentAssetB;
            
            loadAsset('A', currentAssetA);
            loadAsset('B', currentAssetB);
            updateComparison();
        }

        // Reset to default assets and priorities
        function resetToDefaults() {
            currentAssetA = 'kiri';
            currentAssetB = 'fixed_deposit';
            selectedPriorities = [];
            
            document.getElementById('assetA').value = currentAssetA;
            document.getElementById('assetB').value = currentAssetB;
            
            // Reset priority chips
            document.querySelectorAll('.priority-chip').forEach(chip => {
                chip.classList.remove('selected');
            });
            
            // Reset to original scores (in a real app, you'd reload from original data)
            Object.keys(assets).forEach(key => {
                // This would reload original scores from a backup
            });
            
            // Reset mobile filter
            const mobileFilter = document.getElementById('mobileCategoryFilter');
            if (mobileFilter) {
                mobileFilter.value = 'all';
            }
            
            // Reinitialize dropdowns
            initializeAssetDropdowns();
            
            loadAsset('A', currentAssetA);
            loadAsset('B', currentAssetB);
            updateComparison();
        }

        // Helper function to get asset key from side
        function assetKeyFromSide(side) {
            return side === 'A' ? currentAssetA : currentAssetB;
        }

        // Helper function to adjust color brightness
        function adjustColor(color, amount) {
            let usePound = false;
            
            if (color[0] === "#") {
                color = color.slice(1);
                usePound = true;
            }
            
            const num = parseInt(color, 16);
            let r = (num >> 16) + amount;
            let g = ((num >> 8) & 0x00FF) + amount;
            let b = (num & 0x0000FF) + amount;
            
            r = Math.min(Math.max(0, r), 255);
            g = Math.min(Math.max(0, g), 255);
            b = Math.min(Math.max(0, b), 255);
            
            return (usePound ? "#" : "") + (b | (g << 8) | (r << 16)).toString(16).padStart(6, '0');
        }
    </script>
</body>
</html>